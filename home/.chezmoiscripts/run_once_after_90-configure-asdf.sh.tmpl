{{- if (eq .chezmoi.os "linux" "darwin") -}}
#!/usr/bin/env sh
set -eu

. "$HOME/.profile"

plugin_add() {
  # don't exit with exit code 2
  asdf plugin-add "$1" "${2:-}" || [ $? -eq 2 ]
}

while read -r plugin _; do
  plugin_add "$plugin"
done <"$HOME/.tool-versions"

{{ if (eq .chezmoi.os "darwin") -}}
# use gnu-tar instead of builtins when installing zoxide
export PATH="/usr/local/opt/gnu-tar/libexec/gnubin:$PATH"
{{ end -}}
asdf install
{{- end -}}
{{/* vim: set filetype=sh: */}}
